{"version":3,"sources":["../../../server/config/seed.js"],"names":[],"mappings":";;;;;AAKA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAI,eAAe,mBAAS,YAA5B;AACA,IAAI,YAAY,mBAAS,SAAzB;AACA,IAAI,YAAY,mBAAS,SAAzB;;AAGA,IAAI,UAAJ;AACA,IAAI,OAAJ;AACA,IAAI,UAAJ;;AAEA,IAAI,UAAJ;AACA,eAAK,IAAL,CAAU,EAAV,EAAc,MAAd,GACC,IADD,CACM,YAAU;AACd,SAAO,eAAK,MAAL,CAAY,WAAZ,CAAP;AACD,CAHD,EAIC,IAJD,CAIM,UAAS,KAAT,EAAe;AACnB,eAAa,KAAb;AACA,SAAO,eAAK,IAAL,CAAU,EAAV,EAAc,MAAd,EAAP;AACD,CAPD,EAQC,IARD,CAQM,YAAU;AACd,SAAO,eAAK,MAAL,CAAY,UAAU,UAAV,CAAZ,CAAP;AACD,CAVD;;;;;;;;;;;;AAAA,CAuBC,IAvBD,CAuBM,UAAS,SAAT,EAAmB;AACvB,eAAa,SAAb;AACA,OAAI,IAAI,IAAI,CAAZ,EAAe,IAAI,UAAU,MAA7B,EAAqC,GAArC,EAAyC;;AAEvC,QAAI,eAAe,WAAW,CAAX,EAAc,OAAjC;AACA,KAAC,UAAS,YAAT,EAAsB;AACpB,aAAO,eAAK,QAAL,CAAc,YAAd,EAA4B,IAA5B,GACC,IADD,CACM,UAAS,IAAT,EAAc;AAClB,aAAK,KAAL,CAAW,IAAX,CAAgB,YAAhB;AACA,eAAO,KAAK,IAAL,EAAP;AACD,OAJD,CAAP;AAKF,KAND,EAMG,YANH;AAQD;AACD,SAAO,QAAQ,GAAR,CAAY,oCAAZ,CAAP;AACD,CAtCD,EAwCC,IAxCD,CAwCM,YAAU;AACd,SAAO,kBAAQ,IAAR,CAAa,EAAb,EAAiB,MAAjB,EAAP;AACD,CA1CD,EA2CC,IA3CD,CA2CM,YAAU;AACd,SAAO,kBAAQ,MAAR,CAAe,aAAa,UAAb,EAAyB,UAAzB,CAAf,CAAP;AACD,CA7CD,EA8CC,IA9CD,CA8CM,UAAS,SAAT,EAAmB;;AAEvB,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAK,UAAU,MAA/B,EAAwC,EAAE,CAA1C,EAA6C;AACzC,iBAAa,UAAU,CAAV,EAAa,GAA1B;AACF,SAAI,IAAI,IAAI,CAAZ,EAAe,IAAI,WAAW,MAA9B,EAAuC,EAAE,CAAzC,EAA2C;AACzC,iBAAW,CAAX,EAAc,QAAd,CAAuB,IAAvB,CAA4B,UAAU,CAAV,EAAa,GAAzC;AACD;AACD,KAAC,UAAS,UAAT,EAAoB;AACnB,cAAQ,GAAR,CAAY,qBAAZ,EAAmC,UAAU,CAAV,EAAa,OAAhD;AACA,qBAAK,QAAL,CAAc,UAAU,CAAV,EAAa,OAA3B,EAAoC,IAApC,GAA2C,IAA3C,CAAgD,UAAS,IAAT,EAAc;AAC5D,gBAAQ,GAAR,CAAY,gBAAZ,EAA8B,KAAK,IAAnC;AACA,aAAK,QAAL,CAAc,IAAd,CAAmB,UAAnB;AACA,eAAO,KAAK,IAAL,GAAY,IAAZ,CAAiB,YAAU;AAChC,iBAAO,QAAQ,GAAR,CAAY,SAAZ,CAAP;AACD,SAFM,CAAP;AAGD,OAND;AAQD,KAVD,EAUG,UAVH;AAYD;AACD,OAAI,IAAI,IAAI,CAAZ,EAAe,IAAG,WAAW,MAA7B,EAAsC,EAAE,CAAxC,EAA0C;AACxC,eAAW,CAAX,EAAc,IAAd;AACD;AAGF,CAvED","file":"seed.js","sourcesContent":["/**\r\n * Populate DB with sample data on server start\r\n * to disable, edit config/environment/index.js, and set `seedDB: false`\r\n */\r\n\r\n'use strict';\r\nimport Thing from '../api/thing/thing.model';\r\nimport User from '../api/user/user.model';\r\nimport Card from '../api/card/card.model';\r\nimport Comment from '../api/comment/comment.model';\r\nimport MakeSeed from './makeseed';\r\n\r\nvar makeComments = MakeSeed.makeComments;\r\nvar makeCards = MakeSeed.makeCards;\r\nvar makeUsers = MakeSeed.makeUsers;\r\n\r\n\r\nvar _userArray;\r\nvar _cardId;\r\nvar _commentId;\r\n//var _card;\r\nvar _cardArray\r\nUser.find({}).remove()\r\n.then(function(){\r\n  return User.create(makeUsers())\r\n})\r\n.then(function(_user){\r\n  _userArray = _user;\r\n  return Card.find({}).remove()\r\n})\r\n.then(function(){\r\n  return Card.create(makeCards(_userArray))\r\n})\r\n\r\n\r\n/*.then(function(card){\r\n  _card = card;\r\n  _cardId = _card._id;\r\n  return User.findById(_card.creator).exec()\r\n})\r\n.then(function(user){\r\n  user.cards.push(_cardId);\r\n  return user.save()\r\n})*/\r\n\r\n.then(function(cardArray){\r\n  _cardArray = cardArray;\r\n  for(var i = 0; i < cardArray.length; i++){\r\n    \r\n    var _cardCreator = _cardArray[i].creator;\r\n    (function(_cardCreator){\r\n       return User.findById(_cardCreator).exec()\r\n              .then(function(user){\r\n                user.cards.push(_cardCreator);\r\n                return user.save();\r\n              })\r\n    })(_cardCreator);\r\n\r\n  }\r\n  return console.log('equipping card to user is finsihed');\r\n})\r\n\r\n.then(function(){\r\n  return Comment.find({}).remove()\r\n})\r\n.then(function(){\r\n  return Comment.create(makeComments(_userArray, _cardArray))\r\n})\r\n.then(function(_comments){\r\n\r\n  for (var i = 0; i < (_comments.length); ++i) {\r\n      _commentId = _comments[i]._id\r\n    for(var k = 0; k< (_cardArray.length); ++k){\r\n      _cardArray[k].comments.push(_comments[i]._id);\r\n    }\r\n    (function(_commentId){\r\n      console.log('comments[i].creator', _comments[i].creator);\r\n      User.findById(_comments[i].creator).exec().then(function(user){\r\n        console.log('For Test: user', user.name);\r\n        user.comments.push(_commentId);\r\n        return user.save().then(function(){\r\n          return console.log('correct');\r\n        });\r\n      })\r\n\r\n    })(_commentId);\r\n\r\n  }\r\n  for(var l = 0; l<(_cardArray.length); ++l){\r\n    _cardArray[l].save();\r\n  }\r\n\r\n\r\n})"]}